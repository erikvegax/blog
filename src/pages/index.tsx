import React, {useState, useEffect} from 'react'
import type { NextPage } from 'next'

import Header from '../components/Header'
import { screenThreshold } from '../api/utils'

import styles from '../styles/Page.module.css'

type Props = {
}

const asciiArt = `
               @. +++-+-+--      .   +#--@@@@@##@@@#.     .+- + @#    -.+ -.-    #@              .
               -. ++.  -.@@@+    @   .#-@@+@         . - -@-+- .-  .     - #           .         .
                 -    - ..+++  ..         ++---   @@#+#.- #@# +---  - # .@+ + .#-               .
                .-##.--++ -+              .        .@@@- +.+@#@@.        -@@@@@#+.              .
               .-.-++--. .            .#+-+       -----#+-- + @.  +@@   +.++@@@@@+              -
               --.+----            .. #+.++    -   -#+-#--- .+. -.  +#...--+ - #@@
               ++ .  ---.              --.--    .   -#-+..-    .---. +..-#-. -
               +        -   -  ..-  + .   .   +.-.    ..--++---+.--. +    . .-.-              ..
                   .          ..-+ .  -..  #   -.     ----- -.-- -+ -+- .. -- ..              .
  .-  .  .  .                 ... -+     -          .---. --  .     . .#.--- ..-@          .  .
          -      .      .     .+-       .-.-.-   --   .---.  --#--   . --. .#-- -           .
      -   .    ..    --+      .  . #  -+- .---.  -      .+--.+-     --+@#@+. -- -
              -- -.+  + ..   -      +#+++- ---  --@---.  ......-..---.+-+##      -        .
    -     +   --+ +      ..--.---   -++. +  .    .#-..   -++-. .   ---#@+  .    .-           -.
                ---     -++++++. .  . .+    --         --.----.    -+-- - .    -#+       .  .-.
          .-.-.        -+++-++-  -  - +   ++ ..+. ##  .-+------     +-        #.#          ..-
          ..-   -  .   ---   ##+++.  #  +-  -  ++--   ---...-+. .  .-...  . -   .  -      .-.-
              ++++- .         ++   . .-########@@@#     +@-  -        .  .--  + .  +     .-..-
      .      .       ..   -...--. ########+-#+#####-.   @@@@@@@         --   -+ .  .   .......
          .-..+    .- ..#----+#####                   . ..+-@@@@@+ ...  -+-# +.. #    ..-.
            -.. ..     .  .+####-                                #@#-    .    -@#@+    . -. .      -
  .---. . ..    +    - -.+###.                .                     #-.     .#+   +   ...-....
  -..--+-++++- ##.    .+###+        .                                 #    .      +    ..-...
    .---  -++. +-   -.##@+           +               +-                           . . ..--..--
                    .##@                         .++++-                   -   .        .-...+
                  -#@-       -                     ++     -+-                         .-..-.-
                  -#@.                -            -#+     -# -              -       .-.-...+.
                -#@                  +                ..      -..            +       -+--+#+-
                #@    -.. .                 .--       ...                     +   ...+-++#-
                ###                        .++##+.....--..                         --++-++-.
              .@@-              -        ++####++####+++.                      +   ...--.--
              #@#           .            ++########@@@###+    +-                -   -.-..+-
              @@          -+-    +       .-+###########@@@-.      --            #  .++-.+-
              @@     .     -     -        .--#####@#+##@@@#-.    - -.               -.+-#-
              @@              ..           .-+#########+#@#+.   --                  ++--+-
              @@                  .      . ..++++++####--###...++                .  ---+-
              @@.              .....    .  ..  ++       ..  ----+...-               ---+#
              +@@           -                           ++++--...-.             -  --+-+#
                @@         ............ ....             -##.........            #  ----#-
                @@#       ..-.-.---.-.....---.     .     ................        . .+++++
                @@.                 .--------     .     ....---.-----..        @  ----+-
                  @@                  ----++-+.    -     .....-----.           +. .##-+-
                  @@#+-.            ++++++---+    +   .---.                  .  --++-+--
                  #@@@#---+--..       ++---+-.+    #                .-+-     ..  --+++#+.
    ...--  --  #@@@#@@@#+-+#++++. ..    .---     +#.#.     .-++++++-#-.    +. -.--.-+++
        ....-.-#@##   -@@++##+++++++++++-.......+@@@@@@###+++-#+++-++-..-.-+.    ..----#-
      ....-.#@##-       @@@+###++@##@###+#++###+#@@##@#@#++-+#++++++-+-..--.@+  .  -+.# +
      ..-+@####-       .-@@@@####++####++++++#########+#++++-+#++#++-.--.   . ..-.++..#
    ...+#@@@@@##+           @@@##@#####+#+++#@#+--+ .-++-+#######++.-+.         - --  ..
      -#@###++#+#+++.          .@@@####++++-++---..-++#++##@#+#+-.-##          .-.-+.-. -
      #@##+###@#@#+##+.           @@@@@#+-+#+##+-++#@####+###@@@##@#####-     .---...
          +#-#-@#+######+#-             #@@@@@@@@@@@@@@@@@@@@   .-######.-+#-  .-+ .   +
          .####@@##@#@##++@+               +##.+#@@@@@#@@@@++@+-#######+++   . .-..-.
            .-##+#++###@##+####+--.-.      ##@#+@#@@###@@##+@@@@#@#+##@#   . -. -.    -
              .##@++#@@@@@@@##@##          .-    .##.####++#@+@######+###+++  -- --+
  +-             ++###@@@####+@@@@@#                    --####@####@#    .#+. .  .--+.-
  ##+              -#++@#-@@+@@@@@@@@#                   -+@@####@#+#+##-      .-----.
  +--+#               +@####@@#@@@@######  ++#+++          --#@@@@@###@+##@#  - ---+++.
  #+#-+-                +#@@#@@@#@@@@##@@@@#   -++-  -++      +  -#-@@+#+##@  ...--++  .
  +++@+                   +#@@@@###@#@#@@@###.                    @@@#+@@##-  ---.--...
  +###.                    .+#@@+@@@@@@@@@#@##+-  -+          -@+##-##@##@#+ .+-++.-. .
  @@@@+-.                      +#@@@@@@@@@@#@@@#@@#.         #+###@@@@+++  .  +.--+#
  @@##+#+-                       +@@@#@@@@@@#@##@####-         +-  -#####.    . .+## .
  ###@@-###-                       @#@@@#@@#@@@@#####+#+-       -       ++  .  -..+-.
  @@#+@#@@@#+.                     .+@@##@@@@@#@###@@@#####                 .   +.---
  -@@##@@@#@@@..                     ++#@@@#@@##+###########+    -+#+       . .  -#+-
  #@##@#@@@@@##--                      .-#@+@##@@@@#####@@####-   -####+    . -- ----
  #@@@@@@@#@@#@+#-                        +-####@#####++#######+#+   .-#     ..----+-
  @@@#@@####+#@@@@##                         +#####+++#+########@##-         .--.+--.
  .#-@@#++#@@@@#@@@@#- .                       .#@#@-#@##@####@##@@@#+       .--++-+
  ###@##+++@#@@@@#@##+ ..                        -##@@@@@#@#####@@@@@@+      . -++-+
  @#@@@@@##@@@@@@#@@@@#- -                         ###@#@##@@@@@@@. +@.        ----+
  #@@@+@#@@@@@@@@@@#@@@@# +                          #@@#######@@#+.#@@@##     --++
`

const croppedAsciiArt = `
    -     +   --+ +      ..--.---   -++. +  .    .#-..   -++-. .   ---#@+  .    .-           -.
                ---     -++++++. .  . .+    --         --.----.    -+-- - .    -#+       .  .-.
          .-.-.        -+++-++-  -  - +   ++ ..+. ##  .-+------     +-        #.#          ..-
          ..-   -  .   ---   ##+++.  #  +-  -  ++--   ---...-+. .  .-...  . -   .  -      .-.-
              ++++- .         ++   . .-########@@@#     +@-  -        .  .--  + .  +     .-..-
      .      .       ..   -...--. ########+-#+#####-.   @@@@@@@         --   -+ .  .   .......
          .-..+    .- ..#----+#####                   . ..+-@@@@@+ ...  -+-# +.. #    ..-.
            -.. ..     .  .+####-                                #@#-    .    -@#@+    . -. .
  .---. . ..    +    - -.+###.                .                     #-.     .#+   +   ...-....
  -..--+-++++- ##.    .+###+        .                                 #    .      +    ..-...
    .---  -++. +-   -.##@+           +               +-                           . . ..--..--
                    .##@                         .++++-                   -   .        .-...+
                  -#@-       -                     ++     -+-                         .-..-.-
                  -#@.                -            -#+     -# -              -       .-.-...+.
                -#@                  +                ..      -..            +       -+--+#+-
                #@    -.. .                 .--       ...                     +   ...+-++#-
                ###                        .++##+.....--..                         --++-++-.
              .@@-              -        ++####++####+++.                      +   ...--.--
              #@#           .            ++########@@@###+    +-                -   -.-..+-
              @@          -+-    +       .-+###########@@@-.      --            #  .++-.+-
              @@     .     -     -        .--#####@#+##@@@#-.    - -.               -.+-#-
              @@              ..           .-+#########+#@#+.   --                  ++--+-
              @@                  .      . ..++++++####--###...++                .  ---+-
              @@.              .....    .  ..  ++       ..  ----+...-               ---+#
              +@@           -                           ++++--...-.             -  --+-+#
                @@         ............ ....             -##.........            #  ----#-
                @@#       ..-.-.---.-.....---.     .     ................        . .+++++
                @@.                 .--------     .     ....---.-----..        @  ----+-
                  @@                  ----++-+.    -     .....-----.           +. .##-+-
                  @@#+-.            ++++++---+    +   .---.                  .  --++-+--
                  #@@@#---+--..       ++---+-.+    #                .-+-     ..  --+++#+.
    ...--  --  #@@@#@@@#+-+#++++. ..    .---     +#.#.     .-++++++-#-.    +. -.--.-+++
        ....-.-#@##   -@@++##+++++++++++-.......+@@@@@@###+++-#+++-++-..-.-+.    ..----#-
      ....-.#@##-       @@@+###++@##@###+#++###+#@@##@#@#++-+#++++++-+-..--.@+  .  -+.# +
      ..-+@####-       .-@@@@####++####++++++#########+#++++-+#++#++-.--.   . ..-.++..#
    ...+#@@@@@##+           @@@##@#####+#+++#@#+--+ .-++-+#######++.-+.         - --  ..
      -#@###++#+#+++.          .@@@####++++-++---..-++#++##@#+#+-.-##          .-.-+.-. -
      #@##+###@#@#+##+.           @@@@@#+-+#+##+-++#@####+###@@@##@#####-     .---...
          +#-#-@#+######+#-             #@@@@@@@@@@@@@@@@@@@@   .-######.-+#-  .-+ .   +
          .####@@##@#@##++@+               +##.+#@@@@@#@@@@++@+-#######+++   . .-..-.
            .-##+#++###@##+####+--.-.      ##@#+@#@@###@@##+@@@@#@#+##@#   . -. -.    -
              .##@++#@@@@@@@##@##          .-    .##.####++#@+@######+###+++  -- --+
  +-             ++###@@@####+@@@@@#                    --####@####@#    .#+. .  .--+.-
  ##+              -#++@#-@@+@@@@@@@@#                   -+@@####@#+#+##-      .-----.
  +--+#               +@####@@#@@@@######  ++#+++          --#@@@@@###@+##@#  - ---+++.
  #+#-+-                +#@@#@@@#@@@@##@@@@#   -++-  -++      +  -#-@@+#+##@  ...--++  .
`

function getWindowDimensions() {
  if (typeof window !== 'undefined') {
    const { innerWidth: width, innerHeight: height } = window;
    return {
      width,
      height
    };
  }
  return {
    width: 0,
    height: 0
  };
}

function useWindowDimensions() {
  const [windowDimensions, setWindowDimensions] = useState({
    width: 0,
    height: 0
  });

  useEffect(() => {
    setWindowDimensions(getWindowDimensions());

    function handleResize() {
      setWindowDimensions(getWindowDimensions());
    }

    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  return windowDimensions;
}

const Home: NextPage<Props> = () => {
  const [displayedArt, setDisplayedArt] = useState('');
  const { width } = useWindowDimensions();
  var art = ""

  if (width >= screenThreshold) {
    art = asciiArt;
  } else {
    art = croppedAsciiArt;
  }

  useEffect(() => {
    let index = 0;
    const interval = setInterval(() => {
      setDisplayedArt(art.slice(0, index));
      index++;
      if (index > art.length) {
        clearInterval(interval);
      }
    }, .5); // Adjust the interval time as needed

    return () => clearInterval(interval);
  }, [art]);

  return (
    <>
      <div className={styles.flex}>
        <Header />
        <div className={styles.asciiContainer}>
          <div className={styles.ascii}>
            <pre>
              {displayedArt}
            </pre>
          </div>
        </div>
      </div>
    </>
  )
}

export default Home;